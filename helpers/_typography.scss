@import '../generic/headings';
@import '../tools/theme';
@import '../tools/typography';
@import '../tools/breakpoint';

// stylelint-disable declaration-no-important

// =============================================================================
// Typography
// =============================================================================

@mixin ekzo-typography-helpers (
  $prefix: $ekzo-h-ns,
  $postfix: '',
  $text-font-sizes: map-get($ekzo-font-sizes, text),
  $ems-font-sizes: map-get($ekzo-font-sizes, ems),
  $headings-font-sizes: map-get($ekzo-font-sizes, headings),
  $extra-headings-font-sizes: map-get($ekzo-font-sizes, extra-headings),
  $line-heights: $ekzo-line-heights,
  $headings-font-family: ekzo-ui-font-family(headings),
  $headings-font-weight: $ekzo-headings-font-weight
) {

  // -----------------------------------------------------------------------------
  // Text
  // -----------------------------------------------------------------------------

  @each $variant, $value in $text-font-sizes {

    .#{$prefix}text#{$variant}#{$postfix} { @include ekzo-font-size($value); }
    .#{$prefix}font-size#{$variant}#{$postfix} { font-size: $value; }
    .#{$prefix}line-height#{$variant}#{$postfix} { @include ekzo-line-height($value); }

  }

  // -----------------------------------------------------------------------------
  // Ems
  // -----------------------------------------------------------------------------

  @each $variant, $value in $ems-font-sizes {

    .#{$prefix}text--em#{$variant}#{$postfix} { @include ekzo-font-size($value); }
    .#{$prefix}font-size--em#{$variant}#{$postfix} { font-size: $value; }

  }

  // -----------------------------------------------------------------------------
  // Headings
  // -----------------------------------------------------------------------------
  // When we define a heading we also define a corresponding class to go with it.
  // This allows us to apply, say, `class="h3"` to any heading to receive a `h3`-like heading

  @each $variant, $value in $headings-font-sizes {

    .#{$prefix}#{$variant}#{$postfix} {
      @include ekzo-headings-properties(
        $font-family: $headings-font-family,
        $font-weight: $headings-font-weight
      );
      @include ekzo-font-size($value);
    }

    .#{$prefix}font-size--#{$variant}#{$postfix} { font-size: $value; }
    .#{$prefix}line-height--#{$variant}#{$postfix} { @include ekzo-line-height($value); }

  }

  // -----------------------------------------------------------------------------
  // Extra headings
  // -----------------------------------------------------------------------------

  @each $variant, $value in $extra-headings-font-sizes {

    .#{$prefix}extra-h#{$variant}#{$postfix} {
      @include ekzo-theme() {
        color: ekzo-theme(extra-headings);
      }

      @include ekzo-font-size($value);

      font-family: ekzo-ui-font-family(extra-headings);
    }

    .#{$prefix}font-size--extra-h#{$variant}#{$postfix} { font-size: $value; }
    .#{$prefix}line-height--extra-h#{$variant}#{$postfix} { @include ekzo-line-height($value); }

  }

  // -----------------------------------------------------------------------------
  // Line heights
  // -----------------------------------------------------------------------------

  @each $variant, $value in $line-heights {
    @if $variant != '' {

      .#{$prefix}line-height#{$variant}#{$postfix} { line-height: $value; }

    }
  }

  // -----------------------------------------------------------------------------
  // Resets
  // -----------------------------------------------------------------------------

  .#{$prefix}font-size--inherit#{$postfix} { font-size: inherit; }
  .#{$prefix}line-height0#{$postfix}       { line-height: 1 !important; }

  // -----------------------------------------------------------------------------
  // Tracked
  // -----------------------------------------------------------------------------

  .#{$prefix}text--tracked#{$postfix}   { letter-spacing:  .16em; }
  .#{$prefix}text--tracked--#{$postfix} { letter-spacing: -.05em; }
  .#{$prefix}text--tracked\+#{$postfix} { letter-spacing:  .32em; }
  .#{$prefix}text--tracked0#{$postfix}  { letter-spacing:  0; }

}

// -----------------------------------------------------------------------------
// Call
// -----------------------------------------------------------------------------

@mixin exports (
  $ns: $ekzo-h-ns,
  $text-font-sizes: map-get($ekzo-font-sizes, text),
  $ems-font-sizes: map-get($ekzo-font-sizes, ems),
  $headings-font-sizes: map-get($ekzo-font-sizes, headings),
  $extra-headings-font-sizes: map-get($ekzo-font-sizes, extra-headings),
  $line-heights: $ekzo-line-heights,
  $headings-font-family: ekzo-ui-font-family(headings),
  $headings-font-weight: $ekzo-headings-font-weight,
  $breakpoins: $ekzo-responsive-helpers-breakpoints
) {
  @include ekzo-for-each-breakpoint($matches: $breakpoins, $include-self: true) {
    @include ekzo-typography-helpers(
      $prefix: $ns,
      $postfix: ekzo-temp(),
      $text-font-sizes: $text-font-sizes,
      $ems-font-sizes: $ems-font-sizes,
      $headings-font-sizes: $headings-font-sizes,
      $extra-headings-font-sizes: $extra-headings-font-sizes,
      $line-heights: $line-heights,
      $headings-font-family: $headings-font-family,
      $headings-font-weight: $headings-font-weight
    );
  }
}