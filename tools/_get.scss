@import './shift';

// =============================================================================
// Get
// =============================================================================

///
// Get the value from the map
// Same as default `map-get`, but supports spreaded keys
// On contrary to default `map-get`, it will throw in case
// path leads to nowhere
// @param {map} $map   The map to query
// @param {*} $keys... The path of the property to get
// @return {*} The resolved value
// @example
//   ekzo-get($borders, 'thin', 'dashed');
///
@function ekzo-get ($map, $keys...) {
  $key: nth($keys, 1);

  @if (type-of($map) != 'map') {
    @error '[ekzo-get]: cannot search property `#{$keys}` in non-map value, `#{type-of($map)}` provided';
  }

  @if not map-has-key($map, $key) {
    @error '[ekzo-get]: cannot find property `#{$keys}` in specified map';
  }

  $map: map-get($map, $key);

  $shifted: ekzo-shift($keys);

  @if length($shifted) == 0 {
    @return $map;
  }

  @return ekzo-get($map, $shifted...);
}